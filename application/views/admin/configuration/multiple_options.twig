{% include('admin/layout/header.twig')%}

<div class="row">
    <div class="col-md-12">
        <div class="panel panel-white">
            <div class="panel-heading">
                <h4 class="panel-title">
                    Languages & Currencies

                    <span class="text-bold"></span></h4>
                <div class="panel-tools">
                    <div class="dropdown">
                        <a data-toggle="dropdown" class="btn btn-xs dropdown-toggle btn-transparent-grey">
                            <i class="fa fa-cog"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-light pull-right" role="menu">
                            <li><a class="panel-collapse collapses" href="#"><i class="fa fa-angle-up"></i> <span>Collapse</span> </a></li>
                            <li><a class="panel-refresh" href="#"><i class="fa fa-refresh"></i> <span>Refresh</span></a></li>
                            <li><a class="panel-config" href="#panel-config" data-toggle="modal"><i class="fa fa-wrench"></i> <span>Configurations</span></a></li>
                            <li><a class="panel-expand" href="#"><i class="fa fa-expand"></i> <span>Fullscreen</span></a></li>
                        </ul>
                    </div>
                    <a class="btn btn-xs btn-link panel-close" href="#">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="panel-body">
                <hr>
                <div class="row">                    
                    <div class="col-md-5">
                        <div class="form-horizontal">
                            <div class="form-group">
                                    <label class="col-sm-7 control-label">
                                        <h6 align="left">AVAILABLE LANGUAGES</h6><br>
                                    </label>
                            </div>
                            
                            {% for l in langs %}
                                <div class="form-group">
                                    <label class="col-sm-3 control-label">
                                        {{ l.name }}
                                    </label>
                                    <div class="col-sm-4">
                                        <label class="switch">
                                            <input type="checkbox" {% if l.status == "1" %} checked {% endif %} id="togBtn" onchange='changeLanguageStatus("{{ l.id }}", this)'>
                                            <div class="slider round">
                                                <span class="on">ON</span>
                                                <span class="off">OFF</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                        
                    <div class="col-md-7">
                        <div class="form-horizontal">
                            <div class="form-group">
                                    <label class="col-sm-7 control-label">
                                        <b><h6 align="left">AVAILABLE CURRENCIES</h6></b><br> 
                                    </label>
                            </div>
                            {% for c in curns %}
                                <div class="form-group">
                                    <label class="col-sm-5 control-label">
                                        {{ c.name }}
                                        {% if c.code != default_currency %} 
                                            (1 <i class="fa {{ default_currency_symbol }}"></i> = {{ c.currency_ratio }} <i class="fa {{ c.icon }}"></i> )
                                        {% else %}
                                            (Default)
                                        {% endif %}
                                        
                                    </label>
                                    <div class="col-sm-4">
                                        <label class="switch">
                                            <input type="checkbox" {% if c.status == "1" %} checked {% endif %} id="togBtn" onchange='changeCurrencyStatus("{{ c.id }}", this)'>
                                            <div class="slider round">
                                                <span class="on">ON</span>
                                                <span class="off">OFF</span>
                                            </div>
                                        </label>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>                                    
    </div>
</div>

<style>                               
    .switch {
        position: relative;
        display: inline-block;
        width: 90px;
        height: 34px;
    }

    .switch input {display:none;}

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #8B91A0;
        -webkit-transition: .4s;
        transition: .4s;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 26px;
        width: 26px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        -webkit-transition: .4s;
        transition: .4s;
    }

    input:checked + .slider {
        background-color: #5bc0de;
    }

    input:focus + .slider {
        box-shadow: 0 0 1px #2196F3;
    }

    input:checked + .slider:before {
        -webkit-transform: translateX(55px);
        -ms-transform: translateX(55px);
        transform: translateX(55px);
    }

    /*------ ADDED CSS ---------*/
    .on
    {
        display: none;
    }

    .on, .off
    {
        color: white;
        position: absolute;
        transform: translate(-50%,-50%);
        top: 50%;
        left: 50%;
        font-size: 10px;
        font-family: Verdana, sans-serif;
    }

    input:checked+ .slider .on
    {display: block;}

    input:checked + .slider .off
    {display: none;}

    /*--------- END --------*/

    /* Rounded sliders */
    .slider.round {
        border-radius: 34px;
    }

    .slider.round:before {
        border-radius: 50%;}
</style>
<script>
    function changeLanguageStatus(lang_id, element)
    {
        if (element.checked) {
            var status = "active";
        } else {
            var status = "inactive";
        }
        $.ajax({
            url: "admin/configuration/change_language_status",
            data: {lang_id: lang_id, status: status},
            success: function (result) {
                if (result == "yes") {
                    if (status == "active") {
                        var msg = "Language Activated";
                        var flag = "success";
                        var title = "Success";
                        show_notification(flag, title, msg);
                    } else {
                        var flag = "error";
                        var msg = "Language Inactivated";
                        var title = "Success";
                        show_notification(flag, title, msg);
                    }

                } else {
                    var flag = "error";
                    var msg = "Updation Failed";
                    var title = "Failed";
                    show_notification(flag, title, msg);
                }
            }
        });
    }


    function changeCurrencyStatus(currency_id, element)
    {
        if (element.checked) {
            var status = "active";
        } else {
            var status = "inactive";
        }
        $.ajax({
            url: "admin/configuration/change_currency_status",
            data: {currency_id: currency_id, status: status},
            success: function (result) {
                if (result == "yes") {
                    if (status == "active") {
                        var msg = "Currency Activated";
                        var flag = "success";
                        var title = "Success";
                        show_notification(flag, title, msg);
                    } else {
                        var flag = "error";
                        var msg = "Currency Inactivated";
                        var title = "Success";
                        show_notification(flag, title, msg);
                    }

                } else {
                    var flag = "error";
                    var msg = "Updation Failed";
                    var title = "Failed";
                    show_notification(flag, title, msg);
                }
            }
        });
    }

    function show_notification(status, title, msg) {
        var i = -1;
        var toastCount = 0;
        var $toastlast;
        var toastIndex = toastCount++;
        toastr.options = {
            closeButton: $('#closeButton').prop('checked'),
            debug: $('#debugInfo').prop('checked'),
            positionClass: $('#positionGroup input:radio:checked').val() || 'toast-top-right',
            onclick: null
        };

        $("#toastrOptions").text("Command: toastr["
                + status
                + "](\""
                + msg
                + (title ? "\", \"" + title : '')
                + "\")\n\ntoastr.options = "
                + JSON.stringify(toastr.options, null, 2)
                );

        var $toast = toastr[status](msg, title); // Wire up an event handler to a button in the toast, if it exists

    }
</script>
{% include('admin/layout/footer.twig')%}
